# 浏览器的回流和重绘

> 回流及重绘，延伸出了一个知识点就是 "CSS 会影响 JS的 执行时间导致 JS脚本变慢"
* 回流必定触发重绘，而重绘不一定触发回流

* 浏览器渲染网页的时候会启用两条线程：
	* 一条渲染 JS 脚本
	* 另一条渲染 UI，即CSS 样式的渲染。但这两条线程是互斥的。
	* 当 JS 线程运行的时候 UI 线程则会中止暂停，反之亦然
		* 当ui 线程运行对页面进行渲染的时候 js 脚本难免会涉及到页面视图上的一些样式的改变，
		* 为了使这个改变更加准确 js 脚本只好等待ui 线程渲染完成的时候才去执行

## 浏览器重绘 repaint
* 重绘：当一个元素自身的宽高，布局，及显示或隐藏没有改变，
* 而只是改变了元素的外观风格的时候，就会产生重绘
	* 例如你改变了元素的background-color


* 触发浏览器重绘或重排的行为
	1. 添加，删除，更新DOM节点；
	2. 通过 display:none隐藏一个DOM节点 -> 触发 重排和重绘；
	3. 通过 visibility:hidden隐藏一个DOM节点 -> 只触发重绘，因为没有几何变化
	4. 移动或给页面中的DOM节点添加动画；
	5. 添加一个样式表，调整样式属性；
	6. 用户行为，例如：调整窗口大小，改变字体，或者滚动页面；
	7. 获取页面某些元素的属性，例如： 获取元素的宽高，位置
  ```
  let offsetH = el.offsetHeight;
  ```




## 浏览器的回流 reflow
* 回流必定触发重绘，而重绘不一定触发回流
* 回流： 重新渲染页面
* 回流：当render tree 的一部分或全部的元素因改变了自身的宽高，布局，显示或隐藏，或者元素内部的文字结构发生变化 导致需要重新构建页面的时候，回流就产生了